# Promps ユーザーガイド

**最終更新**: 2026-02-18
**対象バージョン**: v1.3.3

---

## 目次

- [はじめに](#はじめに)
- [基本操作](#基本操作)
- [文法検証機能](#文法検証機能)
- [パターンテンプレート](#パターンテンプレート)
- [プロジェクトの保存と読込](#プロジェクトの保存と読込)
- [ブロックの種類](#ブロックの種類)
- [プロンプトの作成例](#プロンプトの作成例)
- [Tips & Tricks](#tips--tricks)

---

## はじめに

Prompsは、ビジュアルブロックを使ってAIプロンプトを作成するツールです。Scratchのように、ブロックをドラッグ＆ドロップして組み合わせるだけで、構造化されたプロンプトを生成できます。

### 画面構成

```
┌──────────────────────────────────────────────────┐
│  Promps - Visual Prompt Builder                  │
├──────────────┬───────────────────────┬───────────┤
│              │                       │           │
│  ブロック    │   ワークスペース      │  プレビュー│
│  パレット    │   (ブロック配置)      │  (出力)   │
│              │                       │           │
│  ▼ 名詞      │                       │  出力:    │
│  ▶ 助詞      │   [ブロックを        │  User     │
│  ▶ 動詞      │    ドラッグ＆        │  (NOUN)   │
│  ▶ その他    │    ドロップ]         │  が Order │
│              │                       │  (NOUN) を│
│              │                       │  作成     │
└──────────────┴───────────────────────┴───────────┘
```

Prompsは2つの言語モードに対応しています：
- **日本語モード**: SOV語順と助詞を使った日本語プロンプトを生成
- **英語モード**: SVO語順と前置詞を使った英語プロンプトを生成

---

## 基本操作

### 1. ブロックの配置

**ステップ1: カテゴリーを選択**
- 左パネルのカテゴリー名をクリックして展開します
- 例: 「名詞」をクリック → 名詞ブロックが表示される

**ステップ2: ブロックをドラッグ**
- ブロックをクリックしたまま、中央のワークスペースにドラッグします

**ステップ3: ブロックを接続**
- ブロックは縦方向に接続できます
- 近づけると自動的にスナップ（吸着）します

### 2. ブロックの編集

**名詞ブロック**:
- ブロック内のテキストフィールドをクリックして編集できます
- 例: "User" → "Customer" に変更

**助詞ブロック**:
- 固定ラベルなので編集できません（意図的な設計）
- 必要な助詞を選んでドラッグするだけ

### 3. ブロックの削除

**方法1: ゴミ箱にドラッグ**
- ブロックをワークスペース下部のゴミ箱アイコンにドラッグ

**方法2: 右クリックメニュー**
- ブロックを右クリック → 「Delete Block」を選択

### 4. プレビューの確認

- 右パネルに生成されたプロンプトがリアルタイムで表示されます
- ブロックを追加・削除・編集すると、自動的に更新されます

---

## 文法検証機能

ブロック配置時にリアルタイムで文法チェックが行われます。

### 検証ルール

#### 日本語モード

| ルール | 種別 | 説明 |
|--------|------|------|
| **助詞の位置** | エラー | 助詞は名詞の後に配置する必要があります |
| **連続助詞** | エラー | 助詞が連続してはいけません |
| **動詞の位置** | 警告 | 動詞は文末に配置することを推奨 |
| **連続名詞** | 警告 | 名詞が連続する場合は助詞を挟むことを推奨 |
| **主語欠如** | 警告 | 動詞があるのに「が」助詞がない場合 |
| **目的語欠如** | 警告 | 動詞があるのに「を」助詞がない場合 |

#### 英語モード

英語モードでは、前置詞と冠詞を使ったSVO（主語-動詞-目的語）語順を検証します。

### 表示の見方

- **緑色**: 文法的に正しい構造
- **赤色**: エラー（修正が必要）
- **黄色**: 警告（推奨事項）

### AutoFix（自動修正）

警告メッセージに「修正」ボタンが表示される場合があります：

1. 「修正」ボタンをクリック
2. 必要なブロックが自動的に挿入されます
3. 検証結果が自動更新されます

---

## パターンテンプレート

日本語文型に沿ったパターンテンプレートが利用できます。

### 利用可能なパターン（日本語モード）

| パターン名 | 構造 | 例 |
|------------|------|-----|
| **基本文型 (SOV)** | 名詞 が 名詞 を 動詞 | ユーザー が データ を 分析して |
| **目的語文型 (OV)** | 名詞 を 動詞 | ドキュメント を 要約して |
| **トピック文型** | 名詞 は 名詞 を 動詞 | システム は ログ を 出力して |
| **手段・場所文型** | 名詞 で 名詞 を 動詞 | API で データ を 取得して |
| **並列文型** | 名詞 と 名詞 を 動詞 | User と Admin を 比較して |
| **起点・終点文型** | 名詞 から 名詞 まで 動詞 | 開始日 から 終了日 まで 集計して |
| **目的語先行文型 (OSV)** | 名詞 を 名詞 が 動詞 | ドキュメント を ユーザー が 分析して |

### パターン分析

ブロックを配置すると、現在の構造がどのパターンに一致するか自動的に分析されます。不完全なパターンの場合、欠落しているブロックが提案されます。

---

## プロジェクトの保存と読込

### ツールバーボタン

ヘッダー部分に以下のボタンがあります：

| ボタン | 機能 | ショートカット |
|--------|------|----------------|
| **New** | 新規プロジェクト作成 | `Ctrl+N` |
| **Open** | プロジェクトを開く | `Ctrl+O` |
| **Save** | プロジェクトを保存 | `Ctrl+S` |
| **Save As** | 名前を付けて保存 | `Ctrl+Shift+S` |

### ファイル形式

- 拡張子: `.promps`
- 形式: JSON（テキストエディタで編集可能）
- 内容: ワークスペースのブロック配置、ズーム、スクロール位置

### 未保存の変更

- ワークスペースを変更すると、タイトルバーに `*` が表示されます
- 例: `Untitled * - Promps`
- 保存すると `*` が消えます

### 操作手順

**新規プロジェクト**:
1. `New` ボタンをクリック（または `Ctrl+N`）
2. 未保存の変更がある場合、確認ダイアログが表示されます

**保存**:
1. `Save` ボタンをクリック（または `Ctrl+S`）
2. 初回保存時はファイル保存ダイアログが表示されます
3. ファイル名を入力して保存

**開く**:
1. `Open` ボタンをクリック（または `Ctrl+O`）
2. `.promps` ファイルを選択
3. ワークスペースが復元されます

---

## ブロックの種類

### 利用可能なブロック

#### 1. 名詞ブロック (緑色)

**用途**: エンティティやオブジェクトを表現

**例**:
- `User` - ユーザー
- `Order` - 注文
- `Database` - データベース
- カスタム名詞 - 任意のテキストを入力可能

**出力形式**: `_N:テキスト` → `テキスト (NOUN)`

#### 2. 助詞ブロック (青色) - 日本語モード

**用途**: 名詞と動詞の関係を示す

| 助詞 | 意味 | 使用例 |
|------|------|--------|
| **が** | 主語マーカー | User **が** 分析して |
| **を** | 目的語マーカー | Order **を** 作成 |
| **に** | 方向・対象 | Database **に** 保存 |
| **で** | 手段・場所 | システム **で** 処理 |
| **と** | 並列・共同 | User **と** Admin |
| **は** | 主題マーカー | データ **は** 重要 |
| **も** | 追加 | User **も** 確認 |
| **から** | 起点 | Database **から** 取得 |
| **まで** | 終点 | Start **まで** End |

**出力形式**: 助詞テキスト（そのまま）

#### 3. 前置詞/冠詞ブロック - 英語モード

**用途**: 英語SVO文法での関係を表現

冠詞: `a`, `an`, `the`, `this`, `that`
前置詞: `to`, `with`, `from`, `in`, `on`, `at`, `by`, `for`, `of`, `about`, `into`, `through`

#### 4. 動詞ブロック (赤色)

**用途**: アクションや操作を表現

**固定動詞（日本語モード）**:
| 動詞 | 用途 |
|------|------|
| **分析して** | データや内容を分析する指示 |
| **要約して** | 内容を要約する指示 |
| **翻訳して** | テキストを翻訳する指示 |

**カスタム動詞**: 任意の動詞を入力可能（デフォルト: 作成して）

**出力形式**: 動詞テキスト（そのまま）

#### 5. 句読点ブロック (オレンジ色)

**用途**: 文の区切りや強調を表現

| 記号 | 名前 | 用途 |
|------|------|------|
| **、** | 読点 (touten) | 文中の区切り |
| **。** | 句点 (kuten) | 文末 |
| **！** | 感嘆符 | 強調・驚き |
| **？** | 疑問符 | 質問 |
| **"** | 二重引用符 | 引用開始/終了 |
| **'** | 一重引用符 | 引用開始/終了 |
| **，** | カンマ | 区切り（英語風） |
| **/** | スラッシュ | 選択肢・区切り |
| **&** | アンパサンド | 並列 |

**句読点の文法ルール**:
- 「を、」は不正（「を」の後に読点は置けない）
- 読点「、」は助詞の後に置く
- 句点「。」は動詞の後に置く

#### 6. その他ブロック (紫色)

**用途**: 他のカテゴリーに属さない自由入力要素

テキストフィールドに任意のテキストを入力できます。助詞・動詞・名詞のどれにも当てはまらないトークンを配置する際に使用します。

**出力形式**: 入力テキスト（そのまま）

---

## プロンプトの作成例

### 例1: シンプルな分析指示

**ブロック配置**:
```
[名詞: ドキュメント] → [を] → [動詞: 分析して]
```

**生成結果**:
```
ドキュメント (NOUN) を 分析して
```

**AIへの効果**:
- `ドキュメント` が名詞（対象）であることを明示
- 「分析して」という具体的なアクションを指示

---

### 例2: 主語と目的語

**ブロック配置**:
```
[名詞: User] → [が] → [名詞: Order] → [を] → [動詞: カスタム(作成して)]
```

**生成結果**:
```
User (NOUN) が Order (NOUN) を 作成して
```

**AIへの効果**:
- 主語（User）と目的語（Order）の関係が明確
- カスタム動詞で任意のアクションを指定

---

### 例3: 翻訳指示

**ブロック配置**:
```
[名詞: テキスト] → [を] → [動詞: 翻訳して]
```

**生成結果**:
```
テキスト (NOUN) を 翻訳して
```

---

### 例4: 要約指示

**ブロック配置**:
```
[名詞: レポート] → [を] → [動詞: 要約して]
```

**生成結果**:
```
レポート (NOUN) を 要約して
```

---

### 例5: 複数名詞の並列

**ブロック配置**:
```
[名詞: User] → [と] → [名詞: Admin] → [が] → [動詞: カスタム(管理して)]
```

**生成結果**:
```
User (NOUN) と Admin (NOUN) が 管理して
```

---

### 例6: データベース操作

**ブロック配置**:
```
[名詞: データベース] → [から] → [名詞: データ] → [を] → [動詞: カスタム(取得して)]
```

**生成結果**:
```
データベース (NOUN) から データ (NOUN) を 取得して
```

---

### 例7: 範囲指定

**ブロック配置**:
```
[名詞: 開始日] → [から] → [名詞: 終了日] → [まで] → [動詞: カスタム(集計して)]
```

**生成結果**:
```
開始日 (NOUN) から 終了日 (NOUN) まで 集計して
```

---

## Tips & Tricks

### カテゴリーの展開/折りたたみ

- カテゴリー名をクリックすると、展開/折りたたみができます
- 使わないカテゴリーは折りたたんでおくと、スッキリします

### ブロックの整列

- ワークスペースを右クリック → 「Cleanup Blocks」で自動整列
- 複雑な構造になったときに便利

### ズーム機能

- ワークスペースの右下にズームコントロールがあります
- `+` で拡大、`-` で縮小
- マウスホイールでもズーム可能

### キーボードショートカット

**プロジェクト操作**:
- `Ctrl+N`: 新規プロジェクト
- `Ctrl+O`: プロジェクトを開く
- `Ctrl+S`: 保存
- `Ctrl+Shift+S`: 名前を付けて保存

**ブロック操作**:
- `Ctrl+C`: ブロックをコピー
- `Ctrl+V`: ブロックを貼り付け
- `Delete`: 選択したブロックを削除
- `Ctrl+Z`: 元に戻す

---

## よくある質問

### Q: 助詞ブロックのテキストを編集できないのはなぜ？

A: 意図的な設計です。助詞は固定の文法要素なので、間違った助詞を入力するのを防ぐため、編集不可にしています。必要な助詞をパレットから選んでください。

### Q: 生成されたプロンプトをコピーするには？

A: プレビューパネルのテキストを選択して、`Ctrl+C`でコピーできます。

### Q: ブロックの順序を入れ替えるには？

A: ブロックを一度切り離してから、再度接続してください。直接順序を入れ替える機能は現在開発中です。

### Q: プロジェクトを保存できますか？

A: はい！保存/読込機能があります。`Ctrl+S`で保存、`Ctrl+O`で開くことができます。ファイル形式は`.promps`（JSON）です。

### Q: 文法エラーが表示されたらどうすればいい？

A: エラーメッセージを確認し、指示に従ってブロックを修正してください。「修正」ボタンがある場合は、クリックするだけで自動的に修正されます。

### Q: パターンテンプレートとは？

A: 日本語の文型パターンに沿ってブロックを配置するためのガイドです。現在の配置がどのパターンに一致するか、何が不足しているかを自動的に分析します。

---

## 現在の機能 (v1.3.3)

- 名詞ブロック（固定 + カスタム）
- 助詞ブロック（日本語9種類、英語は冠詞/前置詞）
- 動詞ブロック（11種類固定 + カスタム）
- 句読点ブロック（9種類）
- その他ブロック（自由入力）
- プロジェクト保存/読込 (.promps形式)
- ツールバー (New, Open, Save, Save As)
- キーボードショートカット
- リアルタイム文法検証（6ルール）
- AutoFix（自動修正）
- パターンテンプレート（7種類）
- ダーク/ライトテーマ
- 日本語/英語切替

### フィードバック

バグ報告やご要望は [GitHub Issues](https://github.com/BonoJovi/Promps/issues) までお願いします
